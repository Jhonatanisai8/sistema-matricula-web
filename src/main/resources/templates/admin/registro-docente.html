<!DOCTYPE html>
<html lang="es"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout-admin.html}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title layout:fragment="title">Registro de Docente</title>
    <th:block layout:fragment="styles">
        <style>
            .form-section {
                border: 1px solid #e0e0e0;
                border-radius: 8px;
                padding: 20px;
                margin-bottom: 30px;
                background-color: #fcfcfc;
            }

            .form-section h4 {
                color: #007bff;
                margin-bottom: 20px;
                border-bottom: 1px solid #eee;
                padding-bottom: 10px;
            }

            .error-message {
                color: red;
                font-size: 0.875em;
                margin-top: 0.25em;
            }
        </style>
    </th:block>
</head>
<body>

<section layout:fragment="content" class="flex-grow-1">
    <header>
        <h1 class="h3"><i class="bi bi-person-badge-fill me-2"></i>Registro de Docente</h1>
    </header>

    <div class="container-fluid mt-4">
        <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
            <span th:text="${errorMessage}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
            <span th:text="${successMessage}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">Formulario de Nuevo Docente</h4>
            </div>
            <div class="card-body">
                <form th:action="@{/admin/docentes/registro}" th:object="${docenteRegistroDTO}" method="post">

                    <div class="form-section">
                        <h4>Datos Personales</h4>
                        <div class="row">
                            <div class="form-group col-md-4 mb-3">
                                <label for="dni" class="form-label">DNI <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="dni" th:field="*{dni}" required
                                       maxlength="20">
                                <p th:if="${#fields.hasErrors('dni')}" th:errors="*{dni}" class="error-message"></p>
                            </div>
                            <div class="form-group col-md-4 mb-3">
                                <label for="nombres" class="form-label">Nombres <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="nombres" th:field="*{nombres}" required
                                       maxlength="100">
                                <p th:if="${#fields.hasErrors('nombres')}" th:errors="*{nombres}"
                                   class="error-message"></p>
                            </div>
                            <div class="form-group col-md-4 mb-3">
                                <label for="apellidos" class="form-label">Apellidos <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="apellidos" th:field="*{apellidos}" required
                                       maxlength="100">
                                <p th:if="${#fields.hasErrors('apellidos')}" th:errors="*{apellidos}"
                                   class="error-message"></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-4 mb-3">
                                <label for="fechaNacimiento" class="form-label">Fecha de Nacimiento <span
                                        class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="fechaNacimiento"
                                       th:field="*{fechaNacimiento}" required>
                                <p th:if="${#fields.hasErrors('fechaNacimiento')}" th:errors="*{fechaNacimiento}"
                                   class="error-message"></p>
                            </div>
                            <div class="form-group col-md-4 mb-3">
                                <label for="genero" class="form-label">Género <span class="text-danger">*</span></label>
                                <select class="form-select" id="genero" th:field="*{genero}" required>
                                    <option value="">Seleccione...</option>
                                    <option th:each="g : ${generos}" th:value="${g}" th:text="${g}"></option>
                                </select>
                                <p th:if="${#fields.hasErrors('genero')}" th:errors="*{genero}"
                                   class="error-message"></p>
                            </div>
                            <div class="form-group col-md-4 mb-3">
                                <label for="tipoDocumento" class="form-label">Tipo de Documento <span
                                        class="text-danger">*</span></label>
                                <select class="form-select" id="tipoDocumento" th:field="*{tipoDocumento}" required>
                                    <option value="">Seleccione...</option>
                                    <option th:each="td : ${tiposDocumento}" th:value="${td}" th:text="${td}"></option>
                                </select>
                                <p th:if="${#fields.hasErrors('tipoDocumento')}" th:errors="*{tipoDocumento}"
                                   class="error-message"></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-6 mb-3">
                                <label for="direccion" class="form-label">Dirección</label>
                                <input type="text" class="form-control" id="direccion" th:field="*{direccion}"
                                       maxlength="255">
                                <p th:if="${#fields.hasErrors('direccion')}" th:errors="*{direccion}"
                                   class="error-message"></p>
                            </div>
                            <div class="form-group col-md-3 mb-3">
                                <label for="telefono" class="form-label">Teléfono</label>
                                <input type="text" class="form-control" id="telefono" th:field="*{telefono}"
                                       maxlength="20">
                                <p th:if="${#fields.hasErrors('telefono')}" th:errors="*{telefono}"
                                   class="error-message"></p>
                            </div>
                            <div class="form-group col-md-3 mb-3">
                                <label for="emailPersonal" class="form-label">Email Personal</label>
                                <input type="email" class="form-control" id="emailPersonal" th:field="*{emailPersonal}"
                                       maxlength="100">
                                <p th:if="${#fields.hasErrors('emailPersonal')}" th:errors="*{emailPersonal}"
                                   class="error-message"></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-4 mb-3">
                                <label for="estadoCivil" class="form-label">Estado Civil</label>
                                <select class="form-select" id="estadoCivil" th:field="*{estadoCivil}">
                                    <option value="">Seleccione...</option>
                                    <option th:each="ec : ${estadosCivil}" th:value="${ec}" th:text="${ec}"></option>
                                </select>
                                <p th:if="${#fields.hasErrors('estadoCivil')}" th:errors="*{estadoCivil}"
                                   class="error-message"></p>
                            </div>
                            <div class="form-group col-md-8 mb-3">
                                <label for="fotoUrlDocente" class="form-label">URL Foto Docente</label>
                                <input type="url" class="form-control" id="fotoUrlDocente" th:field="*{fotoUrlDocente}"
                                       maxlength="255">
                                <p th:if="${#fields.hasErrors('fotoUrlDocente')}" th:errors="*{fotoUrlDocente}"
                                   class="error-message"></p>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4>Datos Laborales y Profesionales</h4>
                        <div class="row">
                            <div class="form-group col-md-4 mb-3">
                                <label for="codigoDocente" class="form-label">Código de Docente <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="codigoDocente" th:field="*{codigoDocente}"
                                       required maxlength="50">
                                <p th:if="${#fields.hasErrors('codigoDocente')}" th:errors="*{codigoDocente}"
                                   class="error-message"></p>
                            </div>
                            <div class="form-group col-md-4 mb-3">
                                <label for="emailInstitucional" class="form-label">Email Institucional</label>
                                <input type="email" class="form-control" id="emailInstitucional"
                                       th:field="*{emailInstitucional}" maxlength="100">
                                <p th:if="${#fields.hasErrors('emailInstitucional')}" th:errors="*{emailInstitucional}"
                                   class="error-message"></p>
                            </div>
                            <div class="form-group col-md-4 mb-3">
                                <label for="especialidadPrincipal" class="form-label">Especialidad Principal <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="especialidadPrincipal"
                                       th:field="*{especialidadPrincipal}" required maxlength="100">
                                <p th:if="${#fields.hasErrors('especialidadPrincipal')}"
                                   th:errors="*{especialidadPrincipal}" class="error-message"></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-4 mb-3">
                                <label for="especialidadSecundaria" class="form-label">Especialidad Secundaria</label>
                                <input type="text" class="form-control" id="especialidadSecundaria"
                                       th:field="*{especialidadSecundaria}" maxlength="100">
                                <p th:if="${#fields.hasErrors('especialidadSecundaria')}"
                                   th:errors="*{especialidadSecundaria}" class="error-message"></p>
                            </div>
                            <div class="form-group col-md-4 mb-3">
                                <label for="tituloProfesional" class="form-label">Título Profesional <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="tituloProfesional"
                                       th:field="*{tituloProfesional}" required maxlength="100">
                                <p th:if="${#fields.hasErrors('tituloProfesional')}" th:errors="*{tituloProfesional}"
                                   class="error-message"></p>
                            </div>
                            <div class="form-group col-md-4 mb-3">
                                <label for="universidadEgreso" class="form-label">Universidad de Egreso</label>
                                <input type="text" class="form-control" id="universidadEgreso"
                                       th:field="*{universidadEgreso}" maxlength="255">
                                <p th:if="${#fields.hasErrors('universidadEgreso')}" th:errors="*{universidadEgreso}"
                                   class="error-message"></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-4 mb-3">
                                <label for="fechaContratacion" class="form-label">Fecha de Contratación <span
                                        class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="fechaContratacion"
                                       th:field="*{fechaContratacion}" required>
                                <p th:if="${#fields.hasErrors('fechaContratacion')}" th:errors="*{fechaContratacion}"
                                   class="error-message"></p>
                            </div>
                            <div class="form-group col-md-4 mb-3">
                                <label for="salarioBase" class="form-label">Salario Base <span
                                        class="text-danger">*</span></label>
                                <input type="number" step="0.01" class="form-control" id="salarioBase"
                                       th:field="*{salarioBase}" required min="0">
                                <p th:if="${#fields.hasErrors('salarioBase')}" th:errors="*{salarioBase}"
                                   class="error-message"></p>
                            </div>
                            <div class="form-group col-md-4 mb-3">
                                <label for="tipoContrato" class="form-label">Tipo de Contrato <span class="text-danger">*</span></label>
                                <select class="form-select" id="tipoContrato" th:field="*{tipoContrato}" required>
                                    <option value="">Seleccione...</option>
                                    <option th:each="tc : ${tiposContrato}" th:value="${tc}" th:text="${tc}"></option>
                                </select>
                                <p th:if="${#fields.hasErrors('tipoContrato')}" th:errors="*{tipoContrato}"
                                   class="error-message"></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-4 mb-3">
                                <label for="estadoLaboral" class="form-label">Estado Laboral <span
                                        class="text-danger">*</span></label>
                                <select class="form-select" id="estadoLaboral" th:field="*{estadoLaboral}" required>
                                    <option value="">Seleccione...</option>
                                    <option th:each="el : ${estadosLaboral}" th:value="${el}" th:text="${el}"></option>
                                </select>
                                <p th:if="${#fields.hasErrors('estadoLaboral')}" th:errors="*{estadoLaboral}"
                                   class="error-message"></p>
                            </div>
                            <div class="form-group col-md-4 mb-3">
                                <label for="anosExperiencia" class="form-label">Años de Experiencia <span
                                        class="text-danger">*</span></label>
                                <input type="number" class="form-control" id="anosExperiencia"
                                       th:field="*{anosExperiencia}" required min="0">
                                <p th:if="${#fields.hasErrors('anosExperiencia')}" th:errors="*{anosExperiencia}"
                                   class="error-message"></p>
                            </div>
                            <div class="form-group col-md-4 mb-3 form-check d-flex align-items-center justify-content-center">
                                <input type="checkbox" class="form-check-input" id="coordinador"
                                       th:field="*{coordinador}">
                                <label class="form-check-label ms-2" for="coordinador">Es Coordinador</label>
                                <p th:if="${#fields.hasErrors('coordinador')}" th:errors="*{coordinador}"
                                   class="error-message"></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-12 mb-3">
                                <label for="cvUrl" class="form-label">URL del CV</label>
                                <input type="url" class="form-control" id="cvUrl" th:field="*{cvUrl}" maxlength="255">
                                <p th:if="${#fields.hasErrors('cvUrl')}" th:errors="*{cvUrl}" class="error-message"></p>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex justify-content-center gap-3 mt-4">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="bi bi-save me-2"></i> Registrar Docente
                        </button>
                        <a th:href="@{/admin/docentes}" class="btn btn-secondary btn-lg">
                            <i class="bi bi-x-circle me-2"></i> Cancelar
                        </a>
                    </div>
                    <div th:if="${#fields.hasGlobalErrors()}" class="alert alert-danger mt-3">
                        <p th:each="err : ${#fields.globalErrors()}" th:text="${err}"></p>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<th:block layout:fragment="scripts">
</th:block>
</body>
</html>